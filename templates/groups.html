{% extends "base.html" %}
{% block content %}
  <h1>Group Management</h1>
    <div class="grid">
      <!-- Daftar Grup -->
      <div class="card">
        <div class="toolbar">
          <div class="search">
            <input id="searchInput" placeholder="Search group..." onkeyup="filterGroups()" />
            <span class="icon">üîç</span>
          </div>
          <span class="badge" id="totalGroups">Total: 0</span>
        </div>

        <div class="table-wrap">
          <table id="groupsTable">
            <thead>
              <tr>
                <th>Icon</th>
                <th>Name</th>
                <th>Group ID</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="groupsBody">
              <!-- Data dari API akan muncul di sini -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Modal Detail -->
        <div class="modal" id="detailModal">
            <div class="panel">
                <p><b>Icon:</b> 
                <img id="detailIconUrl">
                <p><b>Name:</b> 
                <h3 id="detailName"></h3>
                <p><b>Group ID:</b> 
                <div id="detailGroupId"></div></p>
                <p><b>Description:</b></p>
                <div id="detailDescription" class="alert"></div>
                <p><b>Rules:</b></p>
                <div id="detailRules" class="alert"></div>
                <button class="btn btn-ghost" onclick="closeDetail()">Close</button>
            </div>
        </div>
      <!-- Form Add/Edit -->
        <div class="card">
            <h3 id="formTitle">Add Group</h3>
            <hr class="hr" />
            <form class="form" id="groupForm" onsubmit="submitForm(event)" enctype="multipart/form-data">
              <input type="hidden" id="groupId">

              <label class="label">Icon</label>
              <input type="file" name="icon_url" id="icon_url" accept="image/*">

              <label class="label">Name</label>
              <input class="input" name="name" id="name" required>

              <label class="label">Facebook Group ID</label>
              <input class="input" name="fb_group_id" id="fb_group_id" required>

              <label class="label">Description</label>
              <textarea class="textarea" name="description" id="description"></textarea>

              <label class="label">Rules</label>
              <textarea class="textarea" name="rules" id="rules"></textarea>

              <div class="flex items-center" style="gap:10px;">
                  <button class="btn btn-primary" type="submit">Save</button>
                  <button class="btn btn-ghost" type="button" onclick="resetForm()">Reset</button>
              </div>
            </form>
        </div>
    </div>
  <script src="{{ url_for('static', filename='js/group.js') }}"></script>
{% endblock %}
